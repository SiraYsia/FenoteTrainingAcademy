const courseDetails = {
    cpr_blended_adult: {
        name: "Adult CPR/AED-BL-R.21",
        price: 70.00,
        descriptionFile: "schedule_folder/descriptions/ara/1.cpr_blended_adult.html",
        dates: [
            { start: "2024-01-06", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-01-09", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-01-12", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-01-15", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-01-18", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-01-20", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-01-23", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-01-27", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-01-31", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-02-01", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-02-03", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-02-06", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-02-08", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-02-10", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-02-13", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-02-16", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-02-19", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-02-22", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-02-24", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-02-27", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-02", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-05", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-07", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-09", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-12", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-15", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-18", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-20", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-23", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-26", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-28", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
            { start: "2024-03-30", end: "2024-03-30", startTime: "10:00", endTime: "11:15" },
        ],
    },
    cpr_blended_first_aid: {
        name: "Adult First Aid/CPR/AED-BL-R.21",
        price: 89.00,
        descriptionFile: "schedule_folder/descriptions/ara/1.cpr_blended_first_aid.html",
        dates: [
            { start: "2024-01-06", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-01-09", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-01-12", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-01-15", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-01-18", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-01-20", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-01-23", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-01-27", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-01-31", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-02-01", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-02-03", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-02-06", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-02-08", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-02-10", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-02-13", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-02-16", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-02-19", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-02-22", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-02-24", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-02-27", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-02", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-05", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-07", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-09", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-12", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-15", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-18", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-20", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-23", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-26", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-28", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
            { start: "2024-03-30", end: "2024-03-30", startTime: "10:00", endTime: "11:30" },
        ],
    },
    cpr_blended_pediatric: {
        name: "Adult And Pediatric First Aid/CPR/AED-BL-R.21",
        price: 99.00,
        descriptionFile: "schedule_folder/descriptions/ara/1.cpr_blended_pediatric.html",
        dates: [
            { start: "2024-01-06", startTime: "10:00", endTime: "12:15" },
            { start: "2024-01-09", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-01-12", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-01-15", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-01-18", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-01-20", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-01-23", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-01-27", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-01-31", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-02-01", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-02-03", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-02-06", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-02-08", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-02-10", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-02-13", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-02-16", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-02-19", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-02-22", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-02-24", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-02-27", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-02", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-05", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-07", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-09", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-12", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-15", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-18", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-20", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-23", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-26", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-28", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
            { start: "2024-03-30", end: "2024-03-30", startTime: "10:00", endTime: "12:15" },
        ],
    },

    
    cpr_classroom_adult: {
        name: "Adult CPR/AED-R.21",
        price: 75.00,
        descriptionFile: "schedule_folder/descriptions/ara/2.cpr_classroom_adult.html",
        dates: [
            // "2024-03-10T13:00:00",
            // "2024-03-15T15:30:00",
        ],
    },
    cpr_classroom_first_aid: {
        name: "Adult First Aid/CPR/AED-R.21",
        price: 98.00,
        descriptionFile: "schedule_folder/descriptions/ara/2.cpr_classroom_first_aid.html",
        dates: [
            // "2024-03-10T13:00:00",
            // "2024-03-15T15:30:00",
        ],
    },
    cpr_classroom_pediatric: {
        name: "Adult And Pediatric First Aid/CPR/AED-R.21",
        price: 110.00,
        descriptionFile: "schedule_folder/descriptions/ara/2.cpr_classroom_pediatric.html",
        dates: [
            // "2024-03-10T13:00:00",
            // "2024-03-15T15:30:00",
        ],
    },
    cpr_sessions_adult: {
        name: "Adult CPR/AED Skills Session-R.21",
        price: 37.00,
        descriptionFile: "schedule_folder/descriptions/ara/3.cpr_sessions_adult.html",
        dates: [
            "2024-03-22T09:00:00",
            "2024-03-25T11:30:00",
        ],
    },
    cpr_sessions_first_aid: {
        name: "Adult And Pediatric First Aid/CPR/AED Skills Session-R.21",
        price: 55.00,
        descriptionFile: "schedule_folder/descriptions/ara/3.cpr_sessions_first_aid.html",
        dates: [
            "2024-03-22T09:00:00",
            "2024-03-25T11:30:00",
        ],
    },
    cpr_sessions_pediatric: {
        name: "Pediatric First Aid/CPR/AED Skills Session-R.21",
        price: 77.00,
        descriptionFile: "schedule_folder/descriptions/ara/3.cpr_sessions_pediatric.html",
        dates: [
            "2024-03-22T09:00:00",
            "2024-03-25T11:30:00",
        ],
    },
    bls_blended: {
        name: "Basic Life Support-BL R.21",
        price: 85.00,
        descriptionFile: "schedule_folder/descriptions/ara/4.bls_blended.html",
        dates: [
            { start: "2024-01-10", end: "2024-03-30", startTime: "11:00", endTime: "13:00" },
            { start: "2024-01-13", end: "2024-03-30", startTime: "11:00", endTime: "13:00" },
            { start: "2024-01-17", end: "2024-03-30", startTime: "11:00", endTime: "13:00" },
            { start: "2024-01-22", end: "2024-03-30", startTime: "11:00", endTime: "13:00" },
            { start: "2024-01-25", end: "2024-03-30", startTime: "11:00", endTime: "13:00" },
            { start: "2024-01-29", end: "2024-03-30", startTime: "11:00", endTime: "13:00" },
            { start: "2024-02-05", end: "2024-03-30", startTime: "11:00", endTime: "13:00" },
            { start: "2024-02-12", end: "2024-03-30", startTime: "11:00", endTime: "13:00" },
        ],
    },
    bls_classroom: {
        name: "Basic Life Support-R.21",
        price: 90.00,
        descriptionFile: "schedule_folder/descriptions/ara/4.bls_classroom.html",
        dates: [
            { start: "2024-01-10", end: "2024-03-30", startTime: "11:00", endTime: "15:00" },
            { start: "2024-01-13", end: "2024-03-30", startTime: "11:00", endTime: "15:00" },
            { start: "2024-01-17", end: "2024-03-30", startTime: "11:00", endTime: "15:00" },
            { start: "2024-01-22", end: "2024-03-30", startTime: "11:00", endTime: "15:00" },
            { start: "2024-01-25", end: "2024-03-30", startTime: "11:00", endTime: "15:00" },
            { start: "2024-01-29", end: "2024-03-30", startTime: "11:00", endTime: "15:00" },
            { start: "2024-02-05", end: "2024-03-30", startTime: "11:00", endTime: "15:00" },
            { start: "2024-02-12", end: "2024-03-30", startTime: "11:00", endTime: "15:00" },
        ],
    },

    babysitter_classroom: {
        name: "Basic Life Support-R.21",
        price: 150.00,
        descriptionFile: "schedule_folder/descriptions/ara/5.babysitter_classroom.html",
        dates: [
            { start: "2024-01-07", end: "2024-03-30", startTime: "09:00", endTime: "19:00" },
            { start: "2024-01-14", end: "2024-03-30", startTime: "09:00", endTime: "19:00" },
            { start: "2024-01-21", end: "2024-03-30", startTime: "09:00", endTime: "19:00" },
            { start: "2024-01-28", end: "2024-03-30", startTime: "09:00", endTime: "19:00" },
            { start: "2024-02-04", end: "2024-03-30", startTime: "09:00", endTime: "19:00" },
        ],
    },


    babysitter_training: {
        name: "Babysitters Training",
        price: 90.00,
        descriptionFile: "schedule_folder/descriptions/ara/5.babysitter_training.html",
        dates: [
            { start: "2024-01-07", end: "2024-03-30", startTime: "09:00", endTime: "16:30" },
            { start: "2024-01-14", end: "2024-03-30", startTime: "09:00", endTime: "16:30" },
            { start: "2024-01-21", end: "2024-03-30", startTime: "09:00", endTime: "16:30" },
            { start: "2024-01-28", end: "2024-03-30", startTime: "09:00", endTime: "16:30" },
            { start: "2024-02-04", end: "2024-03-30", startTime: "09:00", endTime: "16:30" },
        ],
    },
};


function getFormattedDateInET(dateString) {
    // Parse the input date string
    const date = new Date(dateString);

    // Adjust for Eastern Time (New York) offset
    const etOffset = -5 * 60; // Eastern Time offset in minutes
    date.setMinutes(date.getMinutes() - etOffset);

    // Format the adjusted date
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    return date.toLocaleDateString('en-US', options);
}





function updateDateButtons() {
    const selectedCourse = document.getElementById("courseOption").value;
    const dateSelectionDiv = document.getElementById("date-selection");

    // Clear existing buttons
    dateSelectionDiv.innerHTML = '';

    // Get the current date
    const currentDate = new Date();

    // Add new buttons based on the selected course's dates, filtering out past dates
    courseDetails[selectedCourse].dates.forEach(dateObj => {
        const courseDate = new Date(dateObj.start);
        const startTime = dateObj.startTime;
        const endTime = dateObj.endTime;


        // Check if the date has not passed
        if (courseDate >= currentDate) {
            const button = document.createElement("button");

            // Convert to Eastern Time (ET)
            const options = { timeZone: 'America/New_York' };

            const formattedDate = getFormattedDateInET(courseDate)

            const formattedStartTime = new Date(`2000-01-01T${startTime}`).toLocaleTimeString('en-US', options);
            const formattedEndTime = new Date(`2000-01-01T${endTime}`).toLocaleTimeString('en-US', options);

            console.log(formattedStartTime)

            button.innerHTML = `${formattedDate} (${formattedStartTime} - ${formattedEndTime})`;

            // Attach an event listener to each date button
            button.addEventListener("click", () => {
                // Call redirectToConfirmation when the button is clicked
                console.log(selectedCourse)
                console.log(formattedDate)
                console.log(formattedStartTime)
                console.log(formattedEndTime)

                redirectToConfirmation(selectedCourse, formattedDate, formattedStartTime, formattedEndTime);
            });

            dateSelectionDiv.appendChild(button);
        }
    });
}



// Function to update course description based on user selection
function updateCourseDescription() {
    const selectedCourse = document.getElementById("courseOption").value;

    const courseDetail = courseDetails[selectedCourse];

    // Load course description from HTML file
    fetch(courseDetail.descriptionFile)
        .then(response => response.text())
        .then(descriptionHtml => {
            document.getElementById("course-description").innerHTML = descriptionHtml;
        })
        .catch(error => console.error("Error loading description:", error));
        
}


function updateCourseAndDate() {

    document.getElementById('date-selection').innerHTML = '';
    document.getElementById('course-description').innerHTML = '';
    const selectedCertificate = document.getElementById('certificateOption').value;
    const selectedMainOption = document.getElementById('mainOption').value;
    const selectedCourseOption = document.getElementById('courseOption').value;

    // Check if any of the options is empty
    const isAnyOptionEmpty = !selectedCertificate || !selectedMainOption || !selectedCourseOption;

    // Hide or show description and date div based on the condition
    const descriptionSection = document.getElementById("course-description");
    const dateSelectionDiv = document.getElementById("date-selection");

    if (isAnyOptionEmpty) {
        descriptionSection.style.display = 'none';
        dateSelectionDiv.style.display = 'none';
    } else {
        descriptionSection.style.display = 'block';
        dateSelectionDiv.style.display = 'block';
    }

    updateCourseDescription();
    updateDateButtons();
}



fetch('schedule_folder/descriptions/description.html')
    .then(response => response.text())
    .then(descriptionHtml => {
        document.getElementById("description").innerHTML = descriptionHtml;


    })
    .catch(error => console.error("Error loading description:", error));









    function populateAllCoursesAndDates() {
        const scheduleDiv = document.getElementById("schedule");
    
        // Add title for all courses
        const allCoursesTitle = document.createElement("h2");
        allCoursesTitle.innerHTML = "ALL COURSES";
        scheduleDiv.appendChild(allCoursesTitle);
    
        // Iterate over all courses and display their names, description files, and dates
        Object.keys(courseDetails).forEach(course => {
            const courseDetail = courseDetails[course];
    
            // Display course name
            const courseNameHeading = document.createElement("h3");
            courseNameHeading.innerHTML = courseDetail.name;
            scheduleDiv.appendChild(courseNameHeading);
    
            // Display description file content
            const descriptionDiv = document.createElement("div");
            fetch(courseDetail.descriptionFile)
                .then(response => response.text())
                .then(descriptionHtml => {
                    descriptionDiv.innerHTML = descriptionHtml;
                })
                .catch(error => console.error("Error loading description:", error));
    
            scheduleDiv.appendChild(descriptionDiv);


            const separatorDiv = document.createElement("div");
            separatorDiv.classList.add("separator"); // Add a class for styling
            scheduleDiv.appendChild(separatorDiv);


    
            // Display dates for the course, including start time and end time, and filter out past dates
            const currentDate = new Date();
            courseDetail.dates.forEach(dateObj => {
                const courseDate = new Date(dateObj.start);
                const startTime = dateObj.startTime;
                const endTime = dateObj.endTime;

                
   

                // Check if the date has not passed
                if (courseDate >= currentDate) {
                    const button = document.createElement("button");



                    const options = { timeZone: 'America/New_York' };

                    const formattedDate = getFormattedDateInET(courseDate)
        
                    const formattedStartTime = new Date(`2000-01-01T${startTime}`).toLocaleTimeString('en-US', options);
                    const formattedEndTime = new Date(`2000-01-01T${endTime}`).toLocaleTimeString('en-US', options);

                    


                    button.innerHTML = `${formattedDate} (${formattedStartTime} - ${formattedEndTime})`;
    
                    // Attach an event listener to each date button
                    button.addEventListener("click", () => {
                        // Call redirectToConfirmation when the button is clicked
                        redirectToConfirmation(course, formattedDate, formattedStartTime, formattedEndTime);
                    });
    

            
                    scheduleDiv.appendChild(button);
                }
            });
    
            // Add a separator between courses
            const separator = document.createElement("hr");
            scheduleDiv.appendChild(separator);
        });
    }
    
    
    // Set American Red Cross as the default certificate option
    document.getElementById('certificateOption').value = 'red_cross'; // Set the default certificate provider
    populateAllCoursesAndDates(); // Populate all courses and their dates initially
    
    // Update main options and course options accordingly
    document.getElementById('certificateOption').addEventListener('change', updateMainOptions);
    document.getElementById('mainOption').addEventListener('change', updateCourseOptions);

    
    document.addEventListener('DOMContentLoaded', function () {
        // Set American Red Cross as the default certificate option
        document.getElementById('certificateOption').value = 'red_cross'; // Set the default certificate provider
    
        // Trigger the initial population of courses based on the default certificate
        populateCourses('red_cross');
    
        // Update main options and course options accordingly
        updateMainOptions();
        updateCourseOptions();
    });
    







// Update main options and course options accordingly
document.getElementById('certificateOption').addEventListener('change', updateMainOptions);
document.getElementById('mainOption').addEventListener('change', updateCourseOptions);

function updateMainOptions() {
    document.getElementById('mainOption').value = '';
    document.getElementById('courseOption').value = '';
    document.getElementById('date-selection').innerHTML = 'Available dates will appear here';
    document.getElementById('course-description').innerHTML = 'Course description and details will appear here';
    var certificateOption = document.getElementById('certificateOption').value;
    populateCourses(certificateOption);

}


function updateCourseOptions() {
    document.getElementById('courseOption').value = '';
    document.getElementById('date-selection').innerHTML = 'Available dates will appear here';
    document.getElementById('course-description').innerHTML = 'Course description and details will appear here';
    var selectedCourse = document.getElementById('mainOption').value;
    populateFinalOption(selectedCourse);


}

function populateCourses(certificateOption) {
    const dateSelectionDiv = document.getElementById("date-selection");
    const courseDescriptionDiv = document.getElementById("course-description");

    // Simulate fetching courses based on the certificate option
    var courses;

    if (certificateOption === 'red_cross') {
        courses = ['CPR Blended (online + Classroom)', 'CPR Classroom', 'CPR Sessions with prerequisite', 'BLS Blended', 'BLS Classroom', 'Babysitter Classroom'];
    } else if (certificateOption === 'heart_association') {
        courses = ['BLS Provider', 'Heartsaver CPR/AED', 'Heartsaver First Aid CPR/AED', 'HeartSaver Pediatric First Aid CPR/AED', 'Heartsaver for K-12 Schools', 'Heartsaver First Aid Only', 'Heartsaver Bloodborne Pathogens'];

        // Handle 'AHA' case
        const notAvailableMessage = "AHA Courses Not available at the moment. Please check another time. ";

        // Set inner HTML for date selection
        dateSelectionDiv.innerHTML = `<p>${notAvailableMessage}</p>`;

        // Set inner HTML for course description
        courseDescriptionDiv.innerHTML = `<p>${notAvailableMessage}</p>`;
        
        // Return early as we don't need to populate the dropdown
        return;
    } else {
        // Handle other cases or leave courses empty if needed
        courses = [];
    }


    var mainOptionDropdown = document.getElementById('mainOption');
    mainOptionDropdown.innerHTML = '';

    // Add an empty option for mainOption
    var emptyOption = document.createElement('option');
    emptyOption.value = '';
    emptyOption.text = '';
    mainOptionDropdown.appendChild(emptyOption);

    courses.forEach(function(course) {
        var option = document.createElement('option');
        option.value = course;
        option.text = course;
        mainOptionDropdown.appendChild(option);
    });

    // Trigger the change event to populate final options based on the selected course
    mainOptionDropdown.dispatchEvent(new Event('change'));
}

function populateFinalOption(selectedCourse) {
    var courseOptionDropdown = document.getElementById('courseOption');
    courseOptionDropdown.innerHTML = '';

    // Add an empty option
    var emptyOption = document.createElement('option');
    emptyOption.value = ''; // Empty value
    emptyOption.text = ''; // Empty text content
    courseOptionDropdown.appendChild(emptyOption);

    if (selectedCourse) {
        // Simulate fetching final options based on the selected course
        var finalOptions = getFinalOptionsForCourse(selectedCourse);

        finalOptions.forEach(function(finalOption) {
            var option = document.createElement('option');
            option.value = finalOption.id;
            option.text = finalOption.name;
            courseOptionDropdown.appendChild(option);
        });
    }
}














function getFinalOptionsForCourse(course) {
    // Simulate fetching final options based on the selected course
    var finalOptions = [];

    switch (course) {
        case 'CPR Blended (online + Classroom)':
            finalOptions = [
                { id: 'cpr_blended_adult', name: 'Adult CPR/AED-BL-R.21' },
                { id: 'cpr_blended_first_aid', name: 'Adult First Aid/CPR/AED-BL-R.21' },
                { id: 'cpr_blended_pediatric', name: 'Adult And Pediatric First Aid/CPR/AED-BL-R.21' }
            ];
            break;

        case 'CPR Classroom':
            finalOptions = [
                { id: 'cpr_classroom_adult', name: 'Adult CPR/AED-R.21' },
                { id: 'cpr_classroom_first_aid', name: 'Adult First Aid/CPR/AED-R.21' },
                { id: 'cpr_classroom_pediatric', name: 'Adult And Pediatric First Aid/CPR/AED-R.21' }
            ];
            break;

        case 'CPR Sessions with prerequisite':
            finalOptions = [
                { id: 'cpr_sessions_adult', name: 'Adult CPR/AED Skills Session-R.21' },
                { id: 'cpr_sessions_pediatric', name: 'Adult And Pediatric First Aid/CPR/AED Skills Session-R.21' },
                { id: 'cpr_sessions_first_aid', name: 'Adult First Aid/CPR/AED Skills Session-R.21' }
            ];
            break;

        case 'BLS Blended':
            finalOptions = [
                { id: 'bls_blended', name: 'Basic Life Support-BL R.21' }
            ];
            break;

        case 'BLS Classroom':
            finalOptions = [
                { id: 'bls_classroom', name: 'Basic Life Support-R.21' }
            ];
            break;

        case 'Babysitter Classroom':
            finalOptions = [
                { id: 'babysitter_classroom', name: "Babysitter's Training And Pediatric First Aid/CPR" },
                { id: 'babysitter_training', name: "Babysitters Training" }

            ];
            break;

        default:
            // Handle other cases or leave finalOptions empty if needed
            break;
    }

    return finalOptions;
}








// Attach updateDateButtons function to the course selection change event
document.getElementById("course").addEventListener("change", () => {
    updateDateButtons();
    updateCourseDescription(); // Update description for the default date
});




function redirectToConfirmation(course, date, startTime, endTime) {
    const selectedCourse = courseDetails[course];
    const confirmationDetails = {
        course: selectedCourse.name,
        price: selectedCourse.price.toFixed(2),
        date: date,
        startTime: startTime,
        endTime: endTime,
    };
    console.log(confirmationDetails)
    // Redirect to confirmation page with selected course details as query parameters
    const queryString = Object.entries(confirmationDetails)
        .map(([key, value]) => `${encodeURIComponent(key)}=${encodeURIComponent(value)}`)
        .join("&");

    window.location.href = `confirmation.html?${queryString}`;
}




